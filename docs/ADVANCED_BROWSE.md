# é«˜çº§æµè§ˆç³»ç»Ÿä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

é«˜çº§æµè§ˆç³»ç»Ÿä¸ºç®¡ç†å‘˜æä¾›äº†å¼ºå¤§çš„æ•°æ®æµè§ˆå’Œç®¡ç†åŠŸèƒ½ï¼Œæ”¯æŒï¼š

- âœ… **è‡ªå®šä¹‰æ¯é¡µæ˜¾ç¤ºæ¡æ•°** (5-50æ¡)
- âœ… **çµæ´»çš„é¡µé¢è·³è½¬** (é¦–é¡µã€æœ«é¡µã€ä¸Šä¸‹é¡µã€æŒ‡å®šé¡µ)
- âœ… **å¤šå­—æ®µæ’åº** (åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ã€å®¡æ ¸æ—¶é—´ç­‰)
- âœ… **æ’åºæ–¹å‘æ§åˆ¶** (å‡åº/é™åºï¼Œé»˜è®¤æ—©çš„åœ¨å‰)
- âœ… **è‡ªå®šä¹‰æ˜¾ç¤ºå­—æ®µ** (é€‰æ‹©æ˜¾ç¤ºå“ªäº›ä¿¡æ¯)
- âœ… **å®æ—¶åˆ·æ–°** (è·å–æœ€æ–°æ•°æ®)
- âœ… **çŠ¶æ€è¿‡æ»¤** (æŒ‰çŠ¶æ€ç­›é€‰æ•°æ®)

## æ”¯æŒçš„æµè§ˆæ¨¡å—

### 1. æ±‚ç‰‡è¯·æ±‚æµè§ˆ
**å‘½ä»¤**: `/browse_requests`

**åŠŸèƒ½**:
- æµè§ˆæ‰€æœ‰æ±‚ç‰‡è¯·æ±‚
- æŒ‰çŠ¶æ€è¿‡æ»¤ (å¾…å®¡æ ¸/å·²é€šè¿‡/å·²æ‹’ç»)
- æ˜¾ç¤ºåˆ†ç±»ä¿¡æ¯
- æ”¯æŒå¿«é€Ÿå®¡æ ¸æ“ä½œ

**é»˜è®¤æ˜¾ç¤ºå­—æ®µ**:
- ID
- æ ‡é¢˜
- çŠ¶æ€
- åˆ›å»ºæ—¶é—´
- ç”¨æˆ·ID

### 2. æŠ•ç¨¿å†…å®¹æµè§ˆ
**å‘½ä»¤**: `/browse_submissions`

**åŠŸèƒ½**:
- æµè§ˆæ‰€æœ‰æŠ•ç¨¿å†…å®¹
- æŒ‰çŠ¶æ€è¿‡æ»¤
- æ˜¾ç¤ºåˆ†ç±»å’Œå†…å®¹é¢„è§ˆ
- æ”¯æŒå¿«é€Ÿå®¡æ ¸

**é»˜è®¤æ˜¾ç¤ºå­—æ®µ**:
- ID
- æ ‡é¢˜
- çŠ¶æ€
- åˆ›å»ºæ—¶é—´
- ç”¨æˆ·ID

### 3. ç”¨æˆ·åé¦ˆæµè§ˆ
**å‘½ä»¤**: `/browse_feedback`

**åŠŸèƒ½**:
- æµè§ˆç”¨æˆ·åé¦ˆ
- æŒ‰çŠ¶æ€å’Œç±»å‹è¿‡æ»¤
- æ˜¾ç¤ºåé¦ˆç±»å‹å’Œå¤„ç†çŠ¶æ€
- æ”¯æŒå¿«é€Ÿå›å¤

**é»˜è®¤æ˜¾ç¤ºå­—æ®µ**:
- ID
- åé¦ˆç±»å‹
- çŠ¶æ€
- åˆ›å»ºæ—¶é—´
- ç”¨æˆ·ID

### 4. ç”¨æˆ·ä¿¡æ¯æµè§ˆ
**å‘½ä»¤**: `/browse_users`

**åŠŸèƒ½**:
- æµè§ˆæ‰€æœ‰ç”¨æˆ·
- æŒ‰è§’è‰²è¿‡æ»¤
- æ˜¾ç¤ºç”¨æˆ·è¯¦ç»†ä¿¡æ¯
- æ”¯æŒç”¨æˆ·ç®¡ç†æ“ä½œ

**é»˜è®¤æ˜¾ç¤ºå­—æ®µ**:
- ID
- ç”¨æˆ·å
- å…¨å
- è§’è‰²
- åˆ›å»ºæ—¶é—´

## ç•Œé¢æ“ä½œæŒ‡å—

### å¯¼èˆªæ§åˆ¶

```
â®ï¸ é¦–é¡µ    â—€ï¸ ä¸Šé¡µ    ğŸ“„ 2/10    â–¶ï¸ ä¸‹é¡µ    â­ï¸ æœ«é¡µ
           âš™ï¸ æµè§ˆè®¾ç½®              ğŸ”„ åˆ·æ–°
```

- **â®ï¸ é¦–é¡µ**: è·³è½¬åˆ°ç¬¬ä¸€é¡µ
- **â—€ï¸ ä¸Šé¡µ**: è·³è½¬åˆ°ä¸Šä¸€é¡µ
- **ğŸ“„ é¡µç **: æ˜¾ç¤ºå½“å‰é¡µ/æ€»é¡µæ•°ï¼Œç‚¹å‡»å¯è·³è½¬åˆ°æŒ‡å®šé¡µ
- **â–¶ï¸ ä¸‹é¡µ**: è·³è½¬åˆ°ä¸‹ä¸€é¡µ
- **â­ï¸ æœ«é¡µ**: è·³è½¬åˆ°æœ€åä¸€é¡µ
- **âš™ï¸ æµè§ˆè®¾ç½®**: æ‰“å¼€è®¾ç½®é¢æ¿
- **ğŸ”„ åˆ·æ–°**: åˆ·æ–°å½“å‰é¡µé¢æ•°æ®

### è®¾ç½®é¢æ¿

```
ğŸ“Š æ¯é¡µ: 10æ¡
ğŸ“… æ’åº: created_at    ğŸ”„ é¡ºåº: å‡åº
ğŸ·ï¸ æ˜¾ç¤ºå­—æ®µ
â†©ï¸ è¿”å›æµè§ˆ
```

#### æ¯é¡µæ¡æ•°è®¾ç½®
ç‚¹å‡» **ğŸ“Š æ¯é¡µ: Xæ¡** å¯é€‰æ‹©ï¼š
- 5æ¡ã€10æ¡ã€15æ¡ã€20æ¡ã€30æ¡ã€50æ¡

#### æ’åºè®¾ç½®
- **ğŸ“… æ’åºå­—æ®µ**: åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ã€å®¡æ ¸æ—¶é—´ã€å›å¤æ—¶é—´
- **ğŸ”„ æ’åºé¡ºåº**: å‡åº(æ—©çš„åœ¨å‰) / é™åº(æ™šçš„åœ¨å‰)

#### æ˜¾ç¤ºå­—æ®µè®¾ç½®
å¯è‡ªå®šä¹‰æ˜¾ç¤ºå“ªäº›å­—æ®µï¼š
- åŸºç¡€ä¿¡æ¯: IDã€æ ‡é¢˜ã€çŠ¶æ€
- æ—¶é—´ä¿¡æ¯: åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ã€å®¡æ ¸æ—¶é—´
- ç”¨æˆ·ä¿¡æ¯: ç”¨æˆ·IDã€ç”¨æˆ·å
- åˆ†ç±»ä¿¡æ¯: åˆ†ç±»IDã€åˆ†ç±»åç§°
- å…¶ä»–ä¿¡æ¯: æè¿°ã€å¤‡æ³¨ç­‰

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: æŸ¥çœ‹æœ€æ–°çš„æ±‚ç‰‡è¯·æ±‚

1. å‘é€ `/browse_requests`
2. ç‚¹å‡» **âš™ï¸ æµè§ˆè®¾ç½®**
3. ç‚¹å‡» **ğŸ”„ é¡ºåº: å‡åº** åˆ‡æ¢ä¸ºé™åº
4. ç‚¹å‡» **â†©ï¸ è¿”å›æµè§ˆ**
5. ç°åœ¨æ˜¾ç¤ºæœ€æ–°çš„æ±‚ç‰‡è¯·æ±‚åœ¨å‰

### ç¤ºä¾‹2: æ¯é¡µæ˜¾ç¤ºæ›´å¤šå†…å®¹

1. åœ¨ä»»æ„æµè§ˆç•Œé¢ç‚¹å‡» **âš™ï¸ æµè§ˆè®¾ç½®**
2. ç‚¹å‡» **ğŸ“Š æ¯é¡µ: 10æ¡**
3. é€‰æ‹© **30æ¡**
4. è‡ªåŠ¨è¿”å›æµè§ˆç•Œé¢ï¼Œç°åœ¨æ¯é¡µæ˜¾ç¤º30æ¡è®°å½•

### ç¤ºä¾‹3: æŸ¥çœ‹å¾…å¤„ç†çš„åé¦ˆ

1. å‘é€ `/browse_feedback`
2. ç³»ç»Ÿè‡ªåŠ¨æŒ‰åˆ›å»ºæ—¶é—´å‡åºæ˜¾ç¤º
3. ä½¿ç”¨å¯¼èˆªæŒ‰é’®æµè§ˆä¸åŒé¡µé¢
4. ç‚¹å‡»å…·ä½“åé¦ˆè¿›è¡Œå¤„ç†

## æŠ€æœ¯ç‰¹æ€§

### æ€§èƒ½ä¼˜åŒ–
- **åˆ†é¡µæŸ¥è¯¢**: åªåŠ è½½å½“å‰é¡µæ•°æ®ï¼Œå‡å°‘å†…å­˜å ç”¨
- **ç´¢å¼•ä¼˜åŒ–**: æ•°æ®åº“æŸ¥è¯¢ä½¿ç”¨ç´¢å¼•ï¼Œæé«˜æŸ¥è¯¢é€Ÿåº¦
- **ç¼“å­˜æœºåˆ¶**: ç”¨æˆ·è®¾ç½®æœ¬åœ°ç¼“å­˜ï¼Œå‡å°‘é‡å¤é…ç½®

### ç”¨æˆ·ä½“éªŒ
- **çŠ¶æ€ä¿æŒ**: æ¯ä¸ªç”¨æˆ·çš„æµè§ˆè®¾ç½®ç‹¬ç«‹ä¿å­˜
- **æ™ºèƒ½å¯¼èˆª**: æ ¹æ®å½“å‰é¡µé¢æ™ºèƒ½æ˜¾ç¤ºå¯¼èˆªæŒ‰é’®
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

### æ‰©å±•æ€§
- **æ¨¡å—åŒ–è®¾è®¡**: æ˜“äºæ·»åŠ æ–°çš„æµè§ˆæ¨¡å—
- **é…ç½®çµæ´»**: æ”¯æŒè‡ªå®šä¹‰é»˜è®¤é…ç½®
- **æ ¼å¼åŒ–å™¨**: æ”¯æŒè‡ªå®šä¹‰å­—æ®µæ˜¾ç¤ºæ ¼å¼

## å¼€å‘è€…æŒ‡å—

### æ·»åŠ æ–°çš„æµè§ˆæ¨¡å—

1. **åˆ›å»ºæ•°æ®æŸ¥è¯¢å‡½æ•°**:
```python
async def get_your_data_advanced(
    offset: int = 0,
    limit: int = 10,
    sort_field: str = "created_at",
    sort_order: str = "asc",
    # å…¶ä»–è¿‡æ»¤å‚æ•°
) -> Dict[str, Any]:
    # å®ç°æŸ¥è¯¢é€»è¾‘
    return {'items': items, 'total': total_count}
```

2. **åˆ›å»ºæµè§ˆå™¨å®ä¾‹**:
```python
from app.utils.advanced_browser import AdvancedBrowser, BrowserConfig

your_browser = AdvancedBrowser(
    get_your_data_advanced,
    BrowserConfig(
        page_size=10,
        visible_fields=['id', 'name', 'status', 'created_at']
    )
)
```

3. **æ·»åŠ å‘½ä»¤å¤„ç†å™¨**:
```python
@router.message(Command("browse_your_data"), IsAdmin())
async def browse_your_data_command(message: Message):
    user_id = str(message.from_user.id)
    data = await your_browser.get_page_data(user_id, 1)
    # æ ¼å¼åŒ–å’Œæ˜¾ç¤ºé€»è¾‘
```

4. **æ·»åŠ å›è°ƒå¤„ç†å™¨**:
```python
@router.callback_query(F.data.startswith("browse_your_data_"))
async def handle_your_data_browser_callback(callback: CallbackQuery):
    await handle_browser_callback(callback, your_browser, "æ‚¨çš„æ•°æ®æµè§ˆ")
```

### è‡ªå®šä¹‰å­—æ®µæ ¼å¼åŒ–

```python
field_formatters = {
    'status': lambda x: {'pending': 'å¾…å¤„ç†', 'done': 'å·²å®Œæˆ'}.get(x, x),
    'created_at': lambda x: x.strftime('%m-%d %H:%M') if x else 'æ— ',
    'user_id': lambda x: f"ç”¨æˆ·{x}"
}

item_text = browser.format_item_display(
    item, 
    visible_fields, 
    field_formatters
)
```

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæœ‰äº›å­—æ®µæ˜¾ç¤ºä¸º"æ— "ï¼Ÿ
A: è¿™è¡¨ç¤ºè¯¥å­—æ®µåœ¨æ•°æ®åº“ä¸­ä¸ºç©ºå€¼(NULL)ï¼Œè¿™æ˜¯æ­£å¸¸ç°è±¡ã€‚

### Q: å¦‚ä½•é‡ç½®æµè§ˆè®¾ç½®ï¼Ÿ
A: ç›®å‰éœ€è¦é‡æ–°å‘é€æµè§ˆå‘½ä»¤ï¼Œç³»ç»Ÿä¼šä½¿ç”¨é»˜è®¤è®¾ç½®ã€‚åç»­ç‰ˆæœ¬ä¼šæ·»åŠ é‡ç½®åŠŸèƒ½ã€‚

### Q: æ¯é¡µæœ€å¤šèƒ½æ˜¾ç¤ºå¤šå°‘æ¡ï¼Ÿ
A: ä¸ºäº†ä¿è¯æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼Œæ¯é¡µæœ€å¤šæ˜¾ç¤º50æ¡è®°å½•ã€‚

### Q: æ’åºå­—æ®µä¸ç”Ÿæ•ˆæ€ä¹ˆåŠï¼Ÿ
A: ç¡®ä¿é€‰æ‹©çš„æ’åºå­—æ®µåœ¨å½“å‰æ•°æ®è¡¨ä¸­å­˜åœ¨ï¼Œå¦‚æœé—®é¢˜æŒç»­è¯·è”ç³»å¼€å‘è€…ã€‚

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-01-05)
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… æ”¯æŒæ±‚ç‰‡ã€æŠ•ç¨¿ã€åé¦ˆã€ç”¨æˆ·æµè§ˆ
- âœ… å®Œæ•´çš„åˆ†é¡µå’Œæ’åºåŠŸèƒ½
- âœ… è‡ªå®šä¹‰æ˜¾ç¤ºå­—æ®µ
- âœ… å“åº”å¼å¯¼èˆªç•Œé¢

---

**æ³¨æ„**: æ­¤åŠŸèƒ½ä»…å¯¹ç®¡ç†å‘˜å¼€æ”¾ï¼Œæ™®é€šç”¨æˆ·æ— æ³•ä½¿ç”¨æµè§ˆå‘½ä»¤ã€‚